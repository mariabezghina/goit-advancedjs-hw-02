{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\n\nimport \"flatpickr/dist/flatpickr.min.css\";\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nlet userSelectedDate = null;\n\n//Get refs to the \"Start\" button\nconst startButton = document.querySelector('[data-start]')\nconst datePickerInput = document.getElementById(\"datetime-picker\");\n\nstartButton.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n        const selectedDate = selectedDates[0];\n        \n        const now = new Date();\n\n        if (selectedDate.getTime() < now.getTime()) {\n            \n            // window.alert(\"Please choose a date in the future\");\n            iziToast.show({\n            title: 'WARRNING',\n            message: 'Please choose a date in the future',\n            color: 'red', \n            position: 'center', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter, center\n            });\n            startButton.disabled = true;\n            \n            userSelectedDate = null;\n\n        } else {\n            userSelectedDate = selectedDate;\n\n            startButton.disabled = false;\n            \n            console.log(\"Valid date selected:\", userSelectedDate);\n        }\n    }\n};\n\n\nflatpickr(\"#datetime-picker\", options); \n\nstartButton.addEventListener('click', () => {\n   if (userSelectedDate) {\n   \n       timer.start();\n       startButton.disabled = true;\n       datePickerInput.disabled = true\n       \n   }\n});\n\n\nconst timer = {\n    intervalId: null,\n\n    refs: {\n        days: document.querySelector('[data-days]'),\n        hours: document.querySelector('[data-hours'),\n        minutes: document.querySelector('[data-minutes'),\n        seconds: document.querySelector('[data-seconds'),\n    },\n\n\n    start() {\n        this.intervalId = setInterval(() => {\n        this.deadline = userSelectedDate;\n        const diff = this.deadline - Date.now();\n        if (diff <= 0) {\n            this.stop();\n\n            return\n        }\n        const {days, hours, minutes, seconds} = this.convertMs(diff)\n\n        this.refs.days.textContent = this.padDoble(days);\n        this.refs.hours.textContent = this.padDoble(hours);\n        this.refs.minutes.textContent = this.padDoble(minutes);\n        this.refs.seconds.textContent = this.padDoble(seconds);\n        \n\n        }, 1000)\n    },\n\n    stop() {\n        clearInterval(this.intervalId)\n        datePickerInput.disabled = false\n    },\n\n    convertMs(ms) {\n    // Number of milliseconds per unit of time\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n\n        // Remaining days\n        const days = Math.floor(ms / day);\n        // Remaining hours\n        const hours = Math.floor((ms % day) / hour);\n        // Remaining minutes\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        // Remaining seconds\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n        return { \n            days, \n            hours, \n            minutes, \n            seconds };\n        },\n\n        padDoble(value) {\n            return String(value).padStart(2, '0');\n        },\n}\n\n"],"names":["userSelectedDate","startButton","datePickerInput","options","selectedDates","selectedDate","now","iziToast","flatpickr","timer","diff","days","hours","minutes","seconds","ms","value"],"mappings":"2GAWA,IAAIA,EAAmB,KAGvB,MAAMC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAkB,SAAS,eAAe,iBAAiB,EAEjED,EAAY,SAAW,GAEvB,MAAME,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjB,MAAMC,EAAeD,EAAc,CAAC,EAE9BE,EAAM,IAAI,KAEZD,EAAa,QAAO,EAAKC,EAAI,QAAO,GAGpCC,EAAS,KAAK,CACd,MAAO,WACP,QAAS,qCACT,MAAO,MACP,SAAU,QACtB,CAAa,EACDN,EAAY,SAAW,GAEvBD,EAAmB,OAGnBA,EAAmBK,EAEnBJ,EAAY,SAAW,GAEvB,QAAQ,IAAI,uBAAwBD,CAAgB,EAE3D,CACL,EAGAQ,EAAU,mBAAoBL,CAAO,EAErCF,EAAY,iBAAiB,QAAS,IAAM,CACrCD,IAEAS,EAAM,MAAK,EACXR,EAAY,SAAW,GACvBC,EAAgB,SAAW,GAGlC,CAAC,EAGD,MAAMO,EAAQ,CACV,WAAY,KAEZ,KAAM,CACF,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,aAAa,EAC3C,QAAS,SAAS,cAAc,eAAe,EAC/C,QAAS,SAAS,cAAc,eAAe,CAClD,EAGD,OAAQ,CACJ,KAAK,WAAa,YAAY,IAAM,CACpC,KAAK,SAAWT,EAChB,MAAMU,EAAO,KAAK,SAAW,KAAK,IAAG,EACrC,GAAIA,GAAQ,EAAG,CACX,KAAK,KAAI,EAET,MACH,CACD,KAAM,CAAC,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,KAAK,UAAUJ,CAAI,EAE3D,KAAK,KAAK,KAAK,YAAc,KAAK,SAASC,CAAI,EAC/C,KAAK,KAAK,MAAM,YAAc,KAAK,SAASC,CAAK,EACjD,KAAK,KAAK,QAAQ,YAAc,KAAK,SAASC,CAAO,EACrD,KAAK,KAAK,QAAQ,YAAc,KAAK,SAASC,CAAO,CAGpD,EAAE,GAAI,CACV,EAED,MAAO,CACH,cAAc,KAAK,UAAU,EAC7BZ,EAAgB,SAAW,EAC9B,EAED,UAAUa,EAAI,CAQV,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAE1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EAEpCF,EAAU,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,EAEjDD,EAAU,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CACH,KAAAJ,EACA,MAAAC,EACA,QAAAC,EACA,QAAAC,EACH,EAED,SAASE,EAAO,CACZ,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CACT"}